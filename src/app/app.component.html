<div class="container">
  <mat-toolbar class="mat-elevation-z6 header" color="primary">
    <img class="logo" src="assets/icons/icon-72x72.png" alt="App icon, a running chameleon" />
    <span>Formul8 Priorities</span>
  </mat-toolbar>

  <div class="main">
    <mat-horizontal-stepper linear #stepper (selectionChange)="stepChanged($event)">
      <!-- Motivators -->
      <mat-step [completed]="motivatorsComplete">
        <ng-template matStepLabel>Motivators</ng-template>

        <div class="motivators-page">
          <p>
            What motivates you?
          </p>
          <div class="button-grid">
            <button *ngIf="motivatorsList[0]" mat-raised-button color="primary" class="factor-button"
              (click)="motivatorButton(0)">
              <fa-icon icon="coffee" class="icon"></fa-icon>
            </button>
            <button mat-stroked-button color="basic" class="factor-button">Next</button>
            <button mat-stroked-button color="basic" class="factor-button">Next</button>
            <button mat-stroked-button color="basic" class="factor-button">Next</button>
            <button mat-stroked-button color="basic" class="factor-button">Next</button>
            <button mat-stroked-button color="basic" class="factor-button">Next</button>
            <button mat-stroked-button color="basic" class="factor-button">Next</button>
            <button mat-stroked-button color="basic" class="factor-button">Next</button>
            <button mat-stroked-button color="basic" class="factor-button">Next</button>
            <button mat-stroked-button color="basic" class="factor-button">Next</button>
            <button mat-stroked-button color="basic" class="factor-button">Next</button>
            <button mat-stroked-button color="basic" class="factor-button">Next</button>
          </div>
          <div>
            <button mat-raised-button color="primary" matStepperNext>Next</button>
          </div>
        </div>
      </mat-step>

      <!-- ACTIVITIES -->
      <mat-step [completed]="activitiesComplete">
        <ng-template matStepLabel>Activities</ng-template>

        <div class="activities-page">
          <p>
            Please enter up to 12 activities to compare.
          </p>

          <div class="input-container">
            <form (ngSubmit)="addActivity()" #activityForm="ngForm">
              <mat-form-field class="activity-input">
                <input matInput placeholder="Activity Name" type="text" id="name" [(ngModel)]="activityName" name="name"
                  autocomplete="off" color="accent">
              </mat-form-field>
              <button mat-raised-button color="accent" type="submit">Add</button>
            </form>
          </div>

          <mat-list class="activity-list">
            <mat-list-item *ngFor="let activity of activities; last as last">
              <span>{{activity.name}}</span>
              <button mat-icon-button (click)="removeActivity(activity)">
                <mat-icon>delete</mat-icon>
              </button>
              <mat-divider *ngIf="!last"></mat-divider>
            </mat-list-item>
          </mat-list>
          <div>
            <button mat-raised-button color="primary" matStepperNext>Next</button>
          </div>
        </div>
      </mat-step>

      <!-- Factor 1 -->
      <mat-step>
        <ng-template matStepLabel>Factor1</ng-template>

        <div class="list-page">
          <p>
            Please order your activities.
          </p>
          <div cdkDropList (cdkDropListDropped)="factor1Drop($event)" class="list">
            <div cdkDrag *ngFor="let activity of factor1List; last as last" class="list-element">{{activity.name}}
            </div>
          </div>
          <div>
            <button mat-raised-button color="primary" matStepperNext>Next</button>
          </div>
        </div>
      </mat-step>

      <!-- Factor 2 -->
      <mat-step>
        <ng-template matStepLabel>Factor2</ng-template>

        <div class="list-page">
          <p>
            Please order your activities.
          </p>
          <div cdkDropList (cdkDropListDropped)="factor2Drop($event)" class="list">
            <div cdkDrag *ngFor="let activity of factor2List; last as last" class="list-element">
              {{activity.name}}
            </div>
          </div>
          <div>
            <button mat-raised-button color="primary" matStepperNext>Next</button>
          </div>
        </div>
      </mat-step>

      <!-- RESULTS -->
      <mat-step>
        <ng-template matStepLabel>Results</ng-template>

        <div class="results-page">
          <table mat-table [dataSource]="activities" class="mat-elevation-z2 results-table">

            <ng-container matColumnDef="name">
              <th mat-header-cell *matHeaderCellDef> Name </th>
              <td mat-cell *matCellDef="let activity"> {{activity.name}} </td>
            </ng-container>

            <ng-container matColumnDef="factor1">
              <th mat-header-cell *matHeaderCellDef> Factor1 </th>
              <td mat-cell *matCellDef="let activity"> {{activity.factor1}} </td>
            </ng-container>

            <ng-container matColumnDef="factor2">
              <th mat-header-cell *matHeaderCellDef> Factor2 </th>
              <td mat-cell *matCellDef="let activity"> {{activity.factor2}} </td>
            </ng-container>

            <ng-container matColumnDef="total">
              <th mat-header-cell *matHeaderCellDef> Total </th>
              <td mat-cell *matCellDef="let activity"> {{activity.total}} </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
          </table>

          <div class="results-graph-container" style="display: block">
            <canvas baseChart [data]="resultsGraphData" [labels]="resultsGraphLabels" [chartType]="resultsGraphType"
              [colors]="resultsGraphColors" [options]="resultsGraphOptions" [legend]="resultsGraphLegend"
              [plugins]="resultsGraphPlugins"></canvas>
          </div>
        </div>
      </mat-step>
    </mat-horizontal-stepper>
  </div>

  <mat-toolbar class="footer" color="primary">
    <span class="footer-text">
      &copy; Child Associates |
      Design: <a href="https://imperialoctopus.com/">ImperialOctopus</a>
    </span>
  </mat-toolbar>
</div>
